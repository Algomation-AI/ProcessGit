{{if and .IsProcessGitViewer .ProcessGitViewerPayload}}
  <div class="processgit-viewer"
       data-global-init="initRepoProcessGitViewer">
    <div class="ui top attached menu">
      <div class="item active" data-pgv-action="gui">GUI</div>
      <div class="item" data-pgv-action="raw">{{ctx.Locale.Tr "repo.file_view_source"}}</div>
      <div class="right menu">
        <div class="item">
          Viewer: {{.ProcessGitViewerPayload.ID}}
        </div>
        <div class="item">
          Primary: {{.ProcessGitViewerPayload.Path}}
        </div>
        <div class="item">
          <button class="ui primary button" data-pgv-action="save" disabled>{{ctx.Locale.Tr "save"}}</button>
        </div>
      </div>
    </div>

    <div class="ui bottom attached segment">
      <div id="processgit-viewer-mount" class="tw-w-full"></div>

      <!-- Dedicated RAW panel (we control it; donâ€™t rely on Gitea DOM) -->
      <div id="processgit-raw-mount" class="tw-w-full" style="display:none;">
        <pre id="processgit-raw-pre" style="margin:0; white-space:pre-wrap; word-break:break-word; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size:12px; line-height:1.35;"></pre>
      </div>
    </div>

    <script type="application/json" id="processgit-viewer-payload">
      {{JsonUtils.Encode .ProcessGitViewerPayload}}
    </script>
  </div>
{{end}}
